<div class="row" id="detail"></div>
<script id="detailTmpl" type="text/x-jsrender">
  <div class="content-wrapper" style="min-height: 100%;margin-left: 0px!important;background-color: transparent!important">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i>监控</a></li>
      </ol>
    </section>
    <!-- Main content -->
    <section class="content">
      <div class="nav-tabs-custom">
        <!-- Tabs within a box -->
        <ul class="nav nav-tabs">
          <li class="active"><a href="#details" data-toggle="tab">主信息</a></li>
          <li><a href="#env" data-toggle="tab">环境信息</a></li>
          <li><a href="#dump" data-toggle="tab">线程信息</a></li>
          <li><a href="#hystrix" data-toggle="tab">断路器</a></li>
        </ul>
        <div class="tab-content">
          <!-- 监控信息tab页 -->
          <div class="tab-pane active" id="details" style="position: relative;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
            <!-- Main row -->
            <div class="row">
              <!--左侧box 占一半宽度-->
              <section class="col-lg-6 connectedSortable ui-sortable">
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">应用信息</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <div class="summary-section col-md-12 col-sm-12 col-lg-12">
                        <div class="summary-section-title">构建</div>
                        <div class="summary-section-content clearfix"><div class="home-text-junior col-sm-3 text-center border-right"><span>版本</span><br><span class="item-num home-text-senior text-primary">{{:info.build.version}}</span></div><div class="home-text-junior col-sm-3 text-center border-right"><span>服务名</span><br><span class="item-num home-text-senior text-primary">{{:info.build.name}}</span></div><div class="home-text-junior col-sm-3 text-center border-right"><span>组信息</span><br><span class="item-num home-text-senior text-primary">{{:info.build.group}}</span></div><div class="home-text-junior col-sm-3 text-center"><span>时间</span><br><span class="item-num home-text-senior text-danger">{{formatDay:info.build.time}}</span></div></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">磁盘信息</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <div class="col-md-12" id="diskSpace" style="height: 300px;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">JVM</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <table class="table no-margin">
                        <tbody>
                          <tr>
                            <td>在线时长</td>
                            <td id="uptime">{{time:metrics.uptime}}</td>
                          </tr>
                          <tr>
                            <td>系统负载</td>
                            <td>{{:systemload}} (last min. ⌀ runq-sz)</td>
                          </tr>
                          <tr>
                            <td>可用处理器</td>
                            <td>{{:metrics.processors}} </td>
                          </tr>
                          <tr>
                            <td rowspan="3">类</td>
                            <td>目前加载</td>
                            <td>{{:classes.currentLoad}}</td>
                          </tr>
                          <tr>
                            <td>所有类</td>
                            <td>{{:classes.totalLoad}}</td>
                          </tr>
                          <tr>
                            <td>未加载</td>
                            <td>{{:classes.unloaded}}</td>
                          </tr>
                          <tr>
                            <td rowspan="4">线程</td>
                            <td>目前加载</td>
                            <td>{{:threads.current}}</td>
                          </tr>
                          <tr>
                            <td>总共加载</td>
                            <td>{{:threads.totalStarted}}</td>
                          </tr>
                          <tr>
                            <td>守护线程</td>
                            <td>{{:threads.daemon}}</td>
                          </tr>
                          <tr>
                            <td>峰值</td>
                            <td>{{:threads.peak}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">垃圾回收</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <table class="table no-margin">
                        <tbody>
                          <tr>
                            <td rowspan="2">新生代</td>
                            <td>数目</td>
                            <td>{{:gc.ps_scavenge_count}}</td>
                          </tr>
                          <tr>
                            <td>时间</td>
                            <td>{{:gc.ps_scavenge_time}} ms</td>
                          </tr>
                          <tr>
                            <td rowspan="2">老生代</td>
                            <td>数目</td>
                            <td>{{:gc.ps_marksweep_count}}</td>
                          </tr>
                          <tr>
                            <td>时间</td>
                            <td>{{:gc.ps_marksweep_time}} ms</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </section>
              <!--右侧box 占一半宽度-->
              <section class="col-lg-6 connectedSortable ui-sortable">
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">健康状态</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <div class="summary-section col-md-12 col-sm-12 col-lg-12">
                        <div class="summary-section-title">状态</div>
                        <div class="summary-section-content clearfix"><div class="home-text-junior col-sm-3 text-center border-right"><span>应用状态</span><br><span class="item-num home-text-senior text-primary">{{:health.status}}</span></div><div class="home-text-junior col-sm-3 text-center border-right"><span>断路器</span><br><span class="item-num home-text-senior text-primary">{{:health.hystrix.status}}</span></div><div class="home-text-junior col-sm-3 text-center border-right"><span>客户端发现</span><br><span class="item-num home-text-senior text-primary">{{:health.discoveryComposite.discoveryClient.status}}</span></div><div class="home-text-junior col-sm-3 text-center"><span>Eureka状态</span><br><span class="item-num home-text-senior text-primary">{{:health.discoveryComposite.eureka.status}}</span></div></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="box box-info">
                  <!-- Tabs within a box -->
                  <div class="box-header">
                    <h3 class="box-title">内存信息</h3>
                  </div>
                  <div class="box-body">
                    <div class="row clearfix">
                      <div class="col-md-6" id="memory" style="height: 350px;">

                      </div>
                      <div class="col-md-6" id="heapMemory" style="height: 350px;">
                      </div>
                      <div class="col-md-6" id="nonHeapMemory" style="height: 350px;">
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
          <!-- 配置讯息tab页 -->
          <div class="tab-pane" id="env" style="position: relative;">
            <section class="col-lg-12 connectedSortable ui-sortable">
              {{props env}}
              <div class="box box-info">
                <!-- Tabs within a box -->
                <div class="box-header">
                  <h3 class="box-title">{{:key}}</h3>
                </div>
                <div class="box-body">
                  {{if key=='profiles'}}
                  {{:prop}}
                  {{else}}
                  <table class="table no-margin">
                    <tbody>
                      {{props prop}}
                      <tr>
                        <td>{{:key}}</td>
                        <td>{{:prop}}</td>
                      </tr>
                      {{/props}}
                    </tbody>
                  </table>
                  {{/if}}
                </div>
              </div>
              {{/props}}
            </section>
          </div>
          <!--线程信息-->
          <div class="tab-pane" id="dump" style="position: relative;">
            <section class="col-lg-12 connectedSortable ui-sortable">
              {{for dump}}
              <div class="box box-cool">
                <!-- Tabs within a box -->
                <div class="box-header">
                  <h3 class="box-title"><a href="#dump{{:#index}}" data-toggle="collapse">{{:threadId}}&nbsp;{{:threadName}}</a></h3>
                  <div class="pull-right">
                    {{if threadState=='RUNNABLE'}}
                    <small class="label label-success"><i class="fa fa-sun-o"></i>
                      {{:threadState}}</small>
                      {{else}}
                      <small class="label label-warning"><i class="fa fa-exclamation-triangle"></i>
                        {{:threadState}}</small>
                        {{/if}}
                  </div>
                </div>
                <div class="box-body panel-collapse collapse" id="dump{{:#index}}">
                  <!-- 第一行-->
                  <div class="row">
                    <!--第一列-->
                    <div class="col-lg-4 col-md-4 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Blocked Count</label>
                        </div>
                        <div class="col-xs-6">
                          {{:blockedCount}}
                        </div>
                      </div>
                    </div>
                    <!--第二列-->
                    <div class="col-lg-6 col-md-6 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Lock Name</label>
                        </div>
                        <div class="col-xs-6">
                          {{:lockName}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- 第二行-->
                  <div class="row">
                    <!--第一列-->
                    <div class="col-lg-4 col-md-4 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Blocked Time</label>
                        </div>
                        <div class="col-xs-6">
                          {{:blockedTime}}
                        </div>
                      </div>
                    </div>
                    <!--第二列-->
                    <div class="col-lg-6 col-md-6 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Lock Owner Id</label>
                        </div>
                        <div class="col-xs-6">
                          {{:lockOwnerId}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- 第三行-->
                  <div class="row">
                    <!--第一列-->
                    <div class="col-lg-4 col-md-4 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Waited Count</label>
                        </div>
                        <div class="col-xs-6">
                          {{:waitedCount}}
                        </div>
                      </div>
                    </div>
                    <!--第二列-->
                    <div class="col-lg-6 col-md-6 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Lock Nwner Name </label>
                        </div>
                        <div class="col-xs-6">
                          {{:lockOwnerName}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- 第四行-->
                  <div class="row">
                    <!--第一列-->
                    <div class="col-lg-4 col-md-4 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-4">
                          <label for="userCode" class="control-label">Waited Time</label>
                        </div>
                        <div class="col-xs-6">
                          {{:waitedTime}}
                        </div>
                      </div>
                    </div>
                    <!--第二列-->
                  </div>
                  <!-- 第五行-->
                  <div class="row">
                    <!--第一列-->
                    <div class="col-lg-10 col-md-10 col-xs-12">
                      <div class="row form-group">
                        <div class="col-xs-12">
                          <table class="table no-margin">
                            <tbody>
                              {{for stackTrace}}
                              <tr>
                                <td>{{trim:className}}(&nbsp;{{:lineNumber}})</td>
                                {{if nativeMethod==true}}
                                <td><small class="label label-default">
                                  native</small></td>
                                  {{/if}}
                                </tr>
                                {{/for}}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                      <!--第二列-->
                    </div>
                  </div>                
                </div>
              {{/for}}
            </section>
          </div>
          <!--线程信息-->
          <div class="tab-pane" id="hystrix" style="position: relative;">
            <section class="col-lg-12 connectedSortable ui-sortable">
              <div class="box box-info">
                <!-- Tabs within a box -->
                <div class="box-header">
                  <h3 class="box-title">熔断器</h3>
                </div>
                <div class="box-body" id="box-hystrix">
                  <!--charts部分-->
                  <div class="row clearfix">
                    <div class="col-md-12">
                      <div class="embed-responsive embed-responsive-4by3">
                      <iframe class="embed-responsive-item" src="{{:hystrix}}"></iframe>
                      </div>
                    </div>
                  </div>                
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </section>
  </div>
</script>         